## 题目分析

给定一列数，每次可以删掉连续的相同数字，获得的价值是长度的平方，问最大价值。

### 解题思路

首先，这一题和```Burst Ballons```有很多想通之处，都是选一些数删去，问获得的最大价值。因此也很正常的去想到区间dp，令f(l,r)为删去l-r区间后的最大价值。

类比气球题，我们考虑是否要去枚举最后剩下的数字？发现这样并不好处理删去后和两边合并的情况，转移的状态也比较多。

这题和气球不一样的地方在于，气球只取决于两端的两个，这题不仅仅是两个，是两端所有连续的。因此，我们考虑修正状态，记录下两端还有多少个可以合并，那么随之而来的另一个问题就是，两端的颜色是什么呢？难道还要再枚举么？

其实不用，我们只需要考虑末尾就好了。因为末尾的只有两个状态，要么直接删掉，要么把先留着，和前面的某一段合并。因此，令f(l,r,k)为合并l,r区间，且r后边还有k个颜色和它相同的,即f(l,r,k)=max(f(l,r-1,0)+(1+k)*(1+k),f(l,i,1+k)+f(i+1,r,0))。
